"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.TypedPubSub = void 0;
class TypedPubSub {
    constructor(pubSub) {
        this.pubSub = pubSub;
    }
    async publish(routingKey, ...args) {
        if (args[1] !== undefined) {
            await this.pubSub.publish(`${routingKey}:${args[0]}`, args[1]);
        }
        await this.pubSub.publish(routingKey, args[0]);
    }
    asyncIterator(...[routingKey, id]) {
        return this.pubSub.asyncIterator(id === undefined ? routingKey : `${routingKey}:${id}`);
    }
}
exports.TypedPubSub = TypedPubSub;
